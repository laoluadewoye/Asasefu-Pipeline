@if (storyMetadataResultUnit()) {
    <div animate.enter="fade-in" animate.leave="fade-out">
        <div class="result-unit-div">
            <h3>{{ displayNickname() }} Story Metadata</h3>
            @if (latestUnit()) { <h4>Latest Session</h4> }
            <p>ID: {{ storyMetadataResultUnit()?.id }}</p>
            <app-output-icons
                [inputObject]="storyMetadataResultUnit()" 
                [objectName]="storyMetadataResultUnit()?.nickname"
                [showDropdown]="true"
                (dropdownEvent)="flipMetadataSelected()"
                class="outputs" 
            />
        </div>
        @if (metadataSelected()) {
            <div animate.enter="fade-in" animate.leave="fade-out">
                <div class="result-unit-subdiv">
                    <h3>Title of Story</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.title }}</p>
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.authors" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Author(s)'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.summary" 
                        [displayAsList]="true"
                        [displayAsText]="false"
                        [defaultHeader]="'Story Summary'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="'\n'"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.startNotes" 
                        [displayAsList]="true"
                        [displayAsText]="false"
                        [defaultHeader]="'Story Starting Notes'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="'\n'"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.endNotes" 
                        [displayAsList]="true"
                        [displayAsText]="false"
                        [defaultHeader]="'Story Ending Notes'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="'\n'"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.associations" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Associations'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.ratings" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Ratings'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.warnings" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Warnings'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.categories" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Categories'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.fandoms" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Fandoms'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.relationships" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Relationships'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.characters" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Story Characters'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.additionalTags" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Additional Story Tags'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <h3>Written Language</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.language }}</p>
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.series" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Series the Story Is In'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.collections" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Collections the Story Is In'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <h3>Publication Date</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.published }}</p>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Story Last {{ storyMetadataResultUnit()?.data?.status }}</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.statusWhen }}</p>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Words: {{ storyMetadataResultUnit()?.data?.words }}</h3>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Chapters (Current): {{ storyMetadataResultUnit()?.data?.currentChapters }}</h3>
                </div>
                <div class="result-unit-subdiv">
                    @if (storyMetadataResultUnit()?.data?.totalChapters === -1) {
                        <h3>Number of Chapters (Total): TBD</h3>
                    }
                    @else {
                        <h3>Number of Chapters (Total): {{ storyMetadataResultUnit()?.data?.totalChapters }}</h3>
                    }
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Comments: {{ storyMetadataResultUnit()?.data?.comments }}</h3>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Kudos: {{ storyMetadataResultUnit()?.data?.kudos }}</h3>
                    <h4>Number of Unregistered Kudos: {{ storyMetadataResultUnit()?.data?.unregisteredKudos }}</h4>
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.registeredKudos" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Registered Users That Left Kudos'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Bookmarks: {{ storyMetadataResultUnit()?.data?.bookmarks }}</h3>
                    <h4>Number of Unregistered Bookmarks: {{ storyMetadataResultUnit()?.data?.unregisteredBookmarks }}</h4>
                    <app-output-list 
                        [inputList]="storyMetadataResultUnit()?.data?.publicBookmarks" 
                        [displayAsList]="false"
                        [displayAsText]="true"
                        [defaultHeader]="'Registered Users That Left Public Bookmarks'"
                        [displayLimit]="outputListDisplayLimit()"
                        [displaySeperator]="', '"
                    />
                </div>
                <div class="result-unit-subdiv">
                    <h3>Number of Hits: {{ storyMetadataResultUnit()?.data?.hits }}</h3>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Object Creation Timestamp</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.creationTimestamp }}</p>
                </div>
                <div class="result-unit-subdiv">
                    <h3>Object Creation Hash</h3>
                    <p>{{ storyMetadataResultUnit()?.data?.creationHash }}</p>
                </div>
            </div>
        }
    </div>
}
